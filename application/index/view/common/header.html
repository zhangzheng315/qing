<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- jQuery and JavaScript Bundle with Popper -->
    <style>
        /* @media screen and (min-width: 1200px) {
        .layui-container {
           width: 1200px !important;
           padding: 0 !important;
       }
      } */
        @media screen and (min-width: 1200px) {
            /* .layui-container {
                width: 1200px !important;
                padding: 0 !important;
            } */
            .pc-layui-container {
                width: 1200px;
                margin: 0 auto;
                background: #ffffff;
            }

            .mobile-layui-container {
                display: none !important;
            }

            .navbar-collpase {
                display: none;
            }

            .layui-container > .q-logo {
                width: 10%;
            }

            .nav-menu {
                width: 50%;
            }

            .nav-btn > span {
                display: inline-block;
                width: 90px;
                height: 36px;
                line-height: 36px;
                border-radius: 18px;
                font-size: 16px;
                text-align: center;
                cursor: pointer;
            }

            .login {
                border: 1px solid #00cc99;
                color: #00cc99;
                margin-right: 30px;
            }

            .menu > .menu-item > a {
                font-size: 16px;
                font-weight: 400;
                color: #000000;
            }

            .product-pannel {
                position: relative;
                background: #ffffff;
                padding: 20px 0 33px;
                display: flex;
                justify-content: center;
                /* visibility: hidden;
                overflow: hidden;
                z-index: 999;
                margin-top: -80%;


                transition: all .4s; */
            }

            .product-pannel > dl.dl-border {
                padding-right: 160px;
                position: relative;
            }

            .product-pannel > dl.dl-border::after {
                display: block;
                position: absolute;
                content: '';
                width: 1px;
                height: 100%;
                background: #e5e5e5;
                right: 90px;
                top: 10px;
            }
        }

        @media screen and (max-width: 1200px) and (min-width: 1000px) {
            .pc-layui-container {
                width: 960px;
                margin: 0 auto;
                background: #ffffff;
            }

            .navbar-collpase {
                display: none;
            }

            .mobile-layui-container {
                display: none !important;
            }

            .nav-menu {
                width: 60%;
            }

            .menu > .menu-item > a {
                font-size: 16px;
                font-weight: 400;
                color: #000000;
            }

            .nav-btn > span {
                display: inline-block;
                width: 80px;
                height: 30px;
                line-height: 30px;
                border-radius: 15px;
                font-size: 14px;
                text-align: center;
                cursor: pointer;
            }

            .login {
                border: 1px solid #00cc99;
                color: #00cc99;
                margin-right: 20px;
            }

            .product-pannel {
                padding: 16px 0 30px;
                display: flex;
                justify-content: center;
            }

            .product-pannel > dl.dl-border {
                padding-right: 140px;
                position: relative;
            }

            .product-pannel > dl.dl-border::after {
                display: block;
                position: absolute;
                content: '';
                width: 1px;
                height: 100%;
                background: #e5e5e5;
                right: 80px;
                top: 10px;
            }

        }

        @media screen and (max-width: 1000px) and (min-width: 820px) {
            .pc-layui-container {
                width: 780px;
                margin: 0 auto;
                background: #ffffff;
            }

            .navbar-collpase {
                display: none;
            }

            .mobile-layui-container {
                display: none !important;
            }

            .pc-layui-container > .q-logo {
                width: 12%;
            }

            .q-logo > h1 > img {
                width: 100%;
            }

            .nav-menu {
                width: 60%;
            }

            .nav-btn {
                display: block;
            }

            .menu > .menu-item > a {
                font-size: 14px;
                font-weight: 400;
                color: #000000;
            }

            .nav-btn > span {
                display: inline-block;
                width: 72px;
                height: 30px;
                line-height: 30px;
                border-radius: 15px;
                font-size: 12px;
                text-align: center;
                cursor: pointer;
            }

            .login {
                border: 1px solid #00cc99;
                color: #00cc99;
                margin-right: 20px;
            }

            .product-pannel {
                padding: 16px 0 30px;
                display: flex;
                justify-content: center;
            }

            .product-pannel > dl.dl-border {
                padding-right: 100px;
                position: relative;
            }

            .product-pannel > dl.dl-border::after {
                display: block;
                position: absolute;
                content: '';
                width: 1px;
                height: 100%;
                background: #e5e5e5;
                right: 60px;
                top: 10px;
            }
        }

        /* 移动端样式 */
        @media screen and (max-width: 820px) and (min-width: 768px) {
            /* .layui-container {
                padding: 0 !important;
            } */
            .pc-layui-container {
                display: none !important;

            }

            .mobile-layui-container {
                display: block;
                height: 65px;
                padding: 0 15px;
                z-index: 999;
                background: #ffffff;
            }

            .q-logo {
                width: 100px;
            }

            .q-logo > h1 > img {
                width: 100%;
            }

            .navbar-toggle {
                text-align: right;
            }

            .navbar-collpase {
                position: absolute;
                width: 100%;
                top: -500px;
                background: #ffffff;
                z-index: -1;
                transition: all .5s linear;
                border-top: 1px solid #d2d2d2;
                box-shadow: 0px 3px 4px 0px rgba(193, 193, 193, 0.5);
            }

            .navbar-collpase.collpase-true {
                top: 65px;
            }

            .navbar-nav {
                margin: 7.5px 0;
            }

            .navbar-nav > li {
                padding: 10px 15px;
                position: relative;

            }

            .navbar-nav > li > a {
                /* padding: 10px 15px; */
                display: inline-block;
                width: 100%;
            }

            .navbar-nav > li > a:hover {
                color: #00cc99;
            }

            .navbar-nav > li::after {
                content: '';
                display: block;
                right: 0;
                left: 0;
                bottom: 0;
                position: absolute;
                border-bottom: 1px solid rgba(193, 193, 193, 0.6);
            }

            .navbar-nav > li > a > i {
                position: absolute;
                font-size: 24px;
                top: 7px;
                right: 15px;
            }

            .navbar-nav > li.nav-product-span {
                display: inline-block;
                width: 100%;
                cursor: pointer;
            }

            .nav-product-span > i {
                position: absolute;
                font-size: 24px;
                top: 7px;
                right: 15px;
            }

            .nav-pro-con {
                width: 100%;
                /* margin-top: 10px; */
                overflow: hidden;
                transition: height 0.5s;
                /* height: 100px; */
            }

            .nav-pro-con > span {
                display: inline-block;
                width: 100%;
                height: 34px;
                line-height: 34px;
            }

            .login-nav {
                margin: 7.5px 0;
                display: flex;
                justify-content: space-around;
            }

            .login-nav > li {
                width: 90px;
                height: 36px;
                line-height: 36px;
                text-align: center;
                border-radius: 18px;
                cursor: pointer;
            }

            .mobile-freeuse {
                color: #ffffff;
                background: #00cc99;
            }

            .mobile-login {
                color: #00cc99;
                border: 1px solid #00cc99;
            }

        }

        @media screen and (max-width: 768px) {
            .pc-layui-container {
                display: none !important;

            }

            .mobile-layui-container {
                display: block;
                height: 65px;
                padding: 0 15px;
                z-index: 999;
                background: #ffffff;
            }

            .q-logo {
                width: 100px;
            }

            .q-logo > h1 > img {
                width: 100%;
            }

            .navbar-toggle {
                text-align: right;
            }

            .navbar-collpase {
                position: absolute;
                width: 100%;
                top: -500px;
                /* max-height: 350px; */
                background: #ffffff;
                z-index: -1;
                transition: all .5s linear;
                border-top: 1px solid #d2d2d2;
                box-shadow: 0px 3px 4px 0px rgba(193, 193, 193, 0.5);
            }

            .navbar-collpase.collpase-true {
                top: 65px;
            }

            .navbar-nav {
                margin: 7.5px 0;
            }

            .navbar-nav > li {
                padding: 10px 15px;
                position: relative;

            }

            .navbar-nav > li > a {
                /* padding: 10px 15px; */
                display: inline-block;
                width: 100%;
            }

            .navbar-nav > li > a:hover {
                color: #00cc99;
            }

            .navbar-nav > li::after {
                content: '';
                display: block;
                right: 0;
                left: 0;
                bottom: 0;
                position: absolute;
                border-bottom: 1px solid rgba(193, 193, 193, 0.6);
            }

            .navbar-nav > li > a > i {
                position: absolute;
                font-size: 24px;
                top: 7px;
                right: 15px;
            }

            .navbar-nav > li.nav-product-span {
                display: inline-block;
                width: 100%;
                cursor: pointer;
            }

            .nav-product-span > i {
                position: absolute;
                font-size: 24px;
                top: 7px;
                right: 15px;
            }

            .nav-pro-con {
                width: 100%;
                overflow: hidden;
                transition: height 0.5s;
            }

            .nav-pro-con > span {
                display: inline-block;
                width: 100%;
                height: 34px;
                line-height: 34px;
            }

            .login-nav {
                margin: 7.5px 0;
                display: flex;
                justify-content: space-around;
            }

            .login-nav > li {
                width: 80px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 15px;
                cursor: pointer;
                font-size: 12px;
            }

            .mobile-freeuse {
                color: #ffffff;
                background: #00cc99;
            }

            .mobile-login {
                color: #00cc99;
                border: 1px solid #00cc99;
            }

        }

        .header-nav {
            position: sticky;
            top: 0;
            width: 100%;
            box-sizing: border-box;
            box-shadow: 0px 2px 3px 0px rgba(193, 193, 193, 0.3);
            background: #ffffff;
            z-index: 999;
        }

        .flex-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .menu {
            display: flex;
            height: 65px;
            align-items: center;
            justify-content: space-between;
        }

        .menu > .menu-item {
            /* margin: 0 20px; */
            padding: 0 2px;
            height: 65px;
            line-height: 65px;
        }

        .menu-item:hover {
            border-bottom: 2px solid #00cc99;
        }

        .menu > .menu-item > a:hover {
            text-decoration: none;
            color: #00cc99;
        }

        .menu > li.active {
            border-bottom: 3px solid #00cc99;
        }

        .menu > li.active > a {
            color: #00cc99;
        }

        /* .nav-btn>span {
            display: inline-block;
            width: 90px;
            height: 36px;
            line-height: 36px;
            border-radius: 18px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
        }
        .login {
            border: 1px solid #00cc99;
            color: #00cc99;
            margin-right: 30px;
        } */
        .free-use {
            background: #00cc99;
            color: #ffffff;
        }

        .menu-item-product:hover .pull-down-pannel-product {
            top: 65px;
            visibility: visible;
        }

        .pull-down-pannel-product {
            position: absolute;
            width: 100%;
            left: 0;
            top: -350px;
            z-index: -1;
            visibility: hidden;
            /* height: 225px; */
            background: #ffffff;
            box-shadow: 0px -2px 2px 0px rgba(193, 193, 193, 0.3);
            transition: all .5s linear;
        }


        .product-pannel > dl > dt {
            font-size: 12px;
            font-weight: 400;
            color: #999999;
            font-family: 'Microsoft YaHei';
        }

        .product-pannel > dl > dd {
            position: relative;
        }

        .product-pannel > dl > dd::after {
            position: absolute;
            content: '';
            width: 20px;
            height: 20px;
            background-size: contain;
            top: 1px;
            left: -30px;
            background-position: center center;
            background-repeat: no-repeat;
            background: url('/static/image/logo-icon.png');
        }

        .product-pannel > dl > dt, .product-pannel > dl > dd {
            line-height: 30px;
        }

        .product-pannel > dl > dd {
            margin-top: 16px;
        }

        .product-pannel > dl > dt {
            font-size: 12px;
            font-weight: 400;
            margin-bottom: 15px;
        }

        .pink-item {
            position: relative;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            z-index: 2;
        }

        .pink-item > p {
            line-height: 20px;
            font-size: 14px;
            font-weight: 400;
        }

        .pink-item > p.p-active {
            color: #00cc99;
        }

        .pink-item > p:hover {
            color: #00cc99;
        }

        .pink-item > span {
            font-size: 12px;
            line-height: 20px;
            font-weight: 400;
            color: #666666;
        }


    </style>
</head>
<body>
<div class="header-nav">
    <!-- pc端 -->
    <div class="flex-item pc-layui-container">
        <div class="q-logo">
            <a href="/" style="display: block;height: 100%;">
                <h1>
                    <img src="/static/image/logo.png" alt="">
                </h1>
            </a>
        </div>
        <div class="nav-menu">
            <ul class="menu menu_nav">
            </ul>
        </div>
        <div class="nav-btn">
              <span class="login">
                  登录
              </span>
            <span class="free-use">
                  免费试用
              </span>
        </div>
    </div>
    <!-- 移动端 -->
    <div class="mobile-layui-container flex-item">
        <!-- 轻直播logo -->
        <div class="q-logo">
            <h1>
                <img src="/static/image/logo.png" alt="">
            </h1>
        </div>
        <div class="navbar-toggle">
            <!-- <i class="layui-icon layui-icon-align-center" style="font-size: 30px; color: #d2d2d2;"></i>  -->
            <img src="/static/image/menu.svg" alt="">
        </div>
    </div>
    <!-- 导航栏 -->
    <div class="navbar-collpase">
        <ul class="navbar-nav">
            <li><a href="">首页</a></li>
            <li class="nav-product" unfold="1">
                <span class="nav-product-span" href="">产品与服务<i>+</i></span>
                <div class="nav-pro-con">
                    <span><a href="">轻直播平台</a></span>
                    <span><a href="">轻直播平台</a></span>
                </div>
            </li>
            <li><a href="">解决方案</a></li>
            <li><a href="">案列中心</a></li>
            <li><a href="">轻学院</a></li>
            <li><a href="">关于轻直播</a></li>
        </ul>
        <ul class="login-nav">
            <li class="mobile-login">
                登录
            </li>
            <li class="mobile-freeuse">
                免费试用
            </li>
        </ul>
    </div>

</div>
<script>
    $('.navbar-toggle').on('click', function () {
        $('.navbar-collpase').toggleClass('collpase-true');
    })

    $('.nav-product').on('click', function () {
        const unfold = $(this).attr('unfold');
        const realHeight = $('.nav-pro-con').attr('real-height');
        if (unfold && unfold == '1') {
            $('.nav-product-span>i')[0].innerText = '-';
            $('.nav-pro-con').css({
                'height': realHeight + 'px',
            });
        } else {
            $('.nav-pro-con').css({
                'height': '0',
            });
            $('.nav-product-span>i')[0].innerText = '+'
        }

        $(this).attr('unfold', unfold === '0' ? '1' : '0');

    })

    $('.menu li').on('click', function () {
        //  $(this).addClass('active');
    })

    //  (function init(win, doc){
    //      const optionsNode = document.querySelector('.nav-product > .nav-pro-con');
    //       optionsNode.setAttribute('real-height',win.getComputedStyle(optionsNode).height);
    //       optionsNode.style.height = '0px';
    //  })(window, document)

    //  $(window).resize(function() {
    //      const deviceWidth = $(window).width();
    //      console.log(deviceWidth);
    //      if(deviceWidth < 820) {
    //         init();
    //     }
    //  })

    //  function init(){
    //      $('.nav-pro-con').attr('real-height', $('.nav-pro-con').height());
    //      $('.nav-pro-con').css({
    //          'height': '0px'
    //      })
    //  }

    //  $(document).ready(function() {
    //     const deviceWidth = $(window).width();
    //     if(deviceWidth < 820) {
    //         init();
    //     }
    //  })

    $.ajax({
        url: "/index/navigation/navigationListClass",
        success: function (res) {
            console.log(res);
            if (res.status === 200) {
                for (let item of res.nav_list) {
                    if (item.id === 2 || item.id === 6) {
                        if (item.sub.length !== 0) {
                            var child = pingChild(item.sub);
                        }
                        $('.menu_nav').append('<li class="menu-item  menu-item-product">\n' +
                            '                    <a href="">'+ item.menu_name +'</a>\n' +
                            '                    <div class="pull-down-pannel pull-down-pannel-product">\n' +
                            '                        <div class="product-pannel">\n' +
                                                        child +
                            '                        </div>\n' +
                            '                    </div>\n' +
                            '                </li>');
                    }else{
                        $('.menu_nav').append('<li class="menu-item">\n' +
                            '                    <a href="'+ item.route +'">'+ item.menu_name +'</a>\n' +
                            '                </li>');
                    }
                }
            }
        }
    });

    //拼接子集
    function pingChild(array) {
        let child = '';
        if (array.length === 0) {
            return '';
        }
        for (let item of array) {
            if (item.sub.length !== 0) {
                var sun = pingSun(item.sub);
            }
            child += '<dl class="dl-border">\n' +
                '         <dt>'+ item.menu_name +'</dt>\n' +
                          sun +
                '     </dl>';
        }
        return child;
    }

    function pingSun(arr) {
        let sun = '';
        if (arr.length === 0) {
            return '';
        }
        for (let item of arr) {
            sun += '<dd>\n' +
                '       <a href="'+ item.route +'" class="pink-item">\n' +
                '           <p class="p-active">'+ item.menu_name +'</p>\n' +
                // '           <span>企业级视频云直播平台</span>\n' +
                '       </a>\n' +
                '   </dd>';
        }
        return sun;
    }

</script>
</body>
</html>